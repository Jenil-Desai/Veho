const { GoogleGenerativeAI } = require("@google/generative-ai");

const genAI = new GoogleGenerativeAI(process.env.EXPO_PUBLIC_GOOGLE_GEMINI_AI_API_KEY);
const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [{ text: "Generate Travel Plan for Location: Poicha, Rajpipla, Narmada, Gujarat, India, for 2 Days and 1 Night for 2-6 People with a Balanced Journey budget with a Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 1 days and 1 night with each day plan with best time to visit in JSON. Ensure that all URLs (images, bookings, places) are valid and working." }],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "tripDetails": {\n    "location": "Poicha, Rajpipla, Narmada, Gujarat, India",\n    "duration": "2 Days, 1 Night",\n    "groupSize": "2-6 People",\n     "budget": "Balanced Journey",\n    "bestTimeToVisit": "October to March (Pleasant weather)"\n  },\n  "flights": {\n      "details": "Since Poicha is not directly accessible by flight, the nearest major airport is in Vadodara (BDQ). You\'ll need to book a flight to Vadodara and then travel by road to Poicha (approx. 2-3 hours drive).",\n    "exampleFlight": {\n       "city" : "Vadodara (BDQ)",\n        "airline": "IndiGo or SpiceJet",\n       "price": "₹4000 - ₹8000 (Round trip per person, approximate, varies based on date and time of booking)",\n      "bookingUrl": "https://www.makemytrip.com/flights/",\n        "notes":" Prices may vary based on your origin city. Please use the booking URL to check real-time pricing and availability for your dates."\n      }\n  },\n  "hotels": [\n    {\n      "hotelName": "Nilkanthdham Swaminarayan Temple Guest House",\n      "address": "Poicha, Rajpipla, Narmada, Gujarat, India",\n      "price": "₹1500 - ₹3000 per night (approximate, based on room type)",\n       "imageUrl":"https://lh3.googleusercontent.com/p/AF1QipP-k3Fp9-Qz9v2k0H43K-3uW1m_HkX_f7dE8v2z=s680-w680-h510",\n      "geoCoordinates": {\n        "latitude": 21.817797,\n        "longitude": 73.539598\n      },\n       "rating": "3.8",\n       "description":"Simple and Clean Accomodation Inside The Temple Premises with Basic Amenities. It is managed by the Temple Trust. Offers a peaceful stay and is very close to the main temple and facilities. Please Book in Advance."\n\n    },\n  {\n      "hotelName": "Hotel President Rajpipla",\n      "address": "Opp. Railway Station, Rajpipla, Gujarat 393145, India",\n      "price": "₹2000 - ₹4000 per night (approximate, based on room type)",\n        "imageUrl": "https://lh3.googleusercontent.com/p/AF1QipPHdGjC1qHhTq5n06K2T73s0QjE7Hh-T0k8mX_F=s680-w680-h510",\n        "geoCoordinates": {\n           "latitude": 21.884840,\n            "longitude": 73.513931\n        },\n       "rating":"3.5",\n        "description": "A decent option near Rajpipla railway station with basic facilities. It provides comfortable rooms, a restaurant and easy access to the main attractions in Rajpipla."\n\n    }\n   ],\n    "placesToVisit": [\n      {\n        "placeName": "Nilkanthdham Swaminarayan Temple",\n         "placeDetails": "A stunning Swaminarayan temple complex with intricate architecture, beautiful gardens, and a peaceful atmosphere. It includes various themed exhibitions and a scenic boat ride option. Perfect place to spend a tranquil day.",\n         "imageUrl": "https://lh3.googleusercontent.com/p/AF1QipOBcI_ZJ5o_2-B7N_5tLzUe-bM5kFkXpYh9w51p=s680-w680-h510",\n        "geoCoordinates": {\n          "latitude": 21.818032,\n          "longitude": 73.539615\n        },\n         "ticketPricing":"Free Entry (Boat ride and some exhibitions might have nominal charges)",\n         "timeToTravel": "Within the temple premises"\n\n      },\n    {\n        "placeName":"Sardar Sarovar Dam",\n       "placeDetails": "One of the largest dams on the Narmada River, offering panoramic views of the surrounding landscape. It\'s a massive engineering marvel and a great spot for photography.",\n         "imageUrl":"https://lh3.googleusercontent.com/p/AF1QipMx24V5s6gU7qf8-j8s54T6l9h9v3t2uU1kXgVl=s680-w680-h510",\n        "geoCoordinates":{\n            "latitude":21.828654,\n            "longitude":73.737229\n        },\n      "ticketPricing":"Entry Fee: ₹30 per person (approx.)",\n      "timeToTravel":"Approx. 1-1.5 hour drive from Poicha"\n    },\n     {\n        "placeName":"Zarwani Waterfall",\n        "placeDetails":"A beautiful waterfall amidst lush greenery. It\'s a perfect spot for nature lovers and adventure seekers. The trekking route to the fall is also scenic and enjoyable. Check for accessibility before planning a visit.",\n        "imageUrl":"https://lh3.googleusercontent.com/p/AF1QipNlE3hF-uI5WqH049-v7Y2YyZ_f-n8h4q_E9g1H=s680-w680-h510",\n         "geoCoordinates":{\n            "latitude": 21.776845,\n            "longitude": 73.731906\n         },\n         "ticketPricing":"Entry Fee: ₹20-30 per person (approx.)",\n         "timeToTravel":"Approx. 1.5 - 2 hour drive from Poicha"\n    }\n  ],\n    "itinerary": {\n     "day1": {\n         "morning": "Arrive at Vadodara Airport (BDQ). Travel to Poicha (approx. 2-3 hours drive) and Check in to the booked hotel/guest house. Please do Book your accomodation in advance, as they fill up fast specially during weekends.",\n         "afternoon": "Lunch at the temple premises or in Rajpipla. Explore the Nilkanthdham Swaminarayan Temple. Spend time observing its architecture, exhibitions, gardens and if possible take a boat ride.",\n         "evening": "Attend evening aarti (prayer) at the Nilkanthdham Temple. Relax and have dinner at the temple premises (options might be limited).",\n          "notes":"The Temple might have a fixed time for meals at the Dining Hall, please check that in advance before going there. Also some area of the temple close down at night so please try to explore it by early evening."\n       },\n     "day2": {\n         "morning": "Check out from the hotel/guest house. Head towards Sardar Sarovar Dam. Take a short visit to the dam area and enjoy the view.",\n          "afternoon":"Travel to Zarwani Waterfall. Enjoy the scenic surroundings. Plan a short treck towards the falls. Please ensure you are carrying proper footwear and check for accessibility before planning a trip. Carry your snacks, as not many options are available nearby. Pack water for your trek",\n         "evening":"Begin return journey to Vadodara Airport or any desired location."\n        }\n    },\n    "notes":"Please carry a Valid ID, some cash(as all payment options might not be available at every place), First aid kit and comfortable shoes. Booking flights and hotels in advance is recommended, especially during peak season. Be prepared for some travel time between the locations."\n}\n```',
        },
      ],
    },
  ],
});
